🤖 QQ群成员动态成员验证插件
<div align="center">
一个智能、高度可定制的QQ群验证工具，通过动态数学题有效拦截机器人，保护您的群聊安宁
功能简介 •
安装方法 •
配置说明 •
使用教程 •
常见问题 •
更新日志
</div>
✨ 功能简介
本插件为 AstrBot 提供了强大的新成员智能验证功能，能有效过滤广告机器人和可疑用户，全面提升群聊质量。
 * 🧠 动态数学题验证 - 新成员需回答随机生成的100以内加减法问题，代替呆板的静态关键词，极大提升验证强度。
 * 🔄 错误重试机制 - 用户回答错误后，系统将自动生成一道新题并重置验证时间，给予真实用户改正机会。
 * ⏱️ 多段式时间控制 - 完全自定义验证总时长、超时前发送警告的时机、以及验证失败后延迟踢出的时间。
 * 🎨 完全可定制化消息 - 从新成员入群欢迎、答案错误、验证成功，到超时警告、踢出前喊话、最终踢出公告，所有消息均支持您自定义。
 * 🔍 自动监测 - 实时检测新成员入群并立即发起验证流程。
 * 💬 丰富变量支持 - 所有提示信息均支持动态变量，如 @用户、问题、昵称 等，让机器人提示更加智能。
📥 安装方法
<details>
<summary>展开查看详细安装步骤</summary>
 * 进入 AstrBot 的插件管理界面。
 * 在插件市场中搜索 astrbot_plugin_Group-Verification_PRO 进行安装。
 * 安装成功后，进入插件配置页面进行详细设置。
 * 保存配置并重启机器人，或在插件管理中重载本插件。
 * （备选）手动下载 release 包解压后放入 astrbot/plugins 目录，然后重启机器人。
</details>
⚙️ 配置说明
v1.0.1配置项
| 配置项 | 类型 | 说明 |
|---|---|---|
| verification_timeout | int | 验证总超时时间（秒）。默认 300。 |
| kick_countdown_warning_time | int | 在超时前多少秒发送警告消息。设为 0 可禁用。默认 60。 |
| kick_delay | int | 发送“验证超时”消息后，等待多少秒再执行踢人操作。默认 5。 |
| new_member_prompt | string | 新成员入群时的欢迎与验证提示语。 |
| welcome_message | string | 成员验证成功后的祝贺语。 |
| wrong_answer_prompt | string | 成员回答错误后的提示语，之后会自动附带新问题。 |
| countdown_warning_prompt | string | 验证即将超时前的警告消息。 |
| failure_message | string | 成员因超时验证失败、踢出操作前的“最后通牒”消息。 |
| kick_message | string | 成员被踢出后，在群里发送的公开通知。 |
支持的模板变量
您可以在上面的消息模板中使用以下变量，插件会自动替换它们：
 * {at_user} - @指定用户 的CQ码，例如 [CQ:at,qq=12345]。
 * {member_name} - 用户的群名片或QQ昵称。
 * {question} - 动态生成的数学题，例如 76 + 24 = ?。
 * {timeout} - 验证的超时分钟数。
 * {countdown} - 最终踢出前的延迟秒数（即 kick_delay 的值）。
📝 使用教程
<table>
<tr>
<td width="50%">
<h3>1️⃣ 启用与配置</h3>
<p>在 AstrBot 插件页中启用本插件，并根据您的需求在配置页填好各项提示语和时间参数。</p>
</td>
<td width="50%">
<h3>2️⃣ 新人入群验证</h3>
<p>新成员入群后，机器人将自动 @ 他并发送您设定的入群提示语及一道数学题。</p>
</td>
</tr>
<tr>
<td width="50%">
<h3>3️⃣ 回答与结果</h3>
<p>成员需要在规定时间内 @ 机器人并回复正确答案。如果答错，机器人会发送新题目并重置计时。</p>
</td>
<td width="50%">
<h3>4️⃣ 超时处理流程</h3>
<p>若长时间未验证，机器人会发送超时警告。若最终超时，机器人会发送失败消息，并在短暂延迟后将其踢出。</p>
</td>
</tr>
</table>
❓ 常见问题
<details>
<summary><b>为什么用户回答了数字但机器人没有反应？</b></summary>
<p>请确保用户在回答答案时正确 <b>@ 了机器人</b>。这是机器人识别验证消息的关键前提。</p>
</details>
<details>
<summary><b>机器人没有对新成员发起验证？</b></summary>
<p>请检查并确认：1. 机器人账号在群内拥有<b>管理员权限</b>。 2. AstrBot 的事件通知权限正常，没有被风控或屏蔽。</p>
</details>
<details>
<summary><b>可以调整数学题的难度吗？</b></summary>
<p>当前 v1.0.1 版本固定为100以内的加减法。这个难度旨在有效区分普通用户和脚本机器人，对绝大多数用户友好。未来的版本可能会考虑加入难度配置选项。</p>
</details>
📋 更新日志
v1.0.1 (2025-08-07)
 * 🚀 验证方式升级 - PRO版本更新了核心功能从静态关键词验证升级为动态数学题（100以内加减法）验证，极大提升了防机器人能力。
 * 🔔 高级时间与消息控制 - 新增验证超时前警告、答案错误重试、自定义踢出延迟等功能，并开放所有交互消息的自定义配置。
 * 🏗️ 代码重构 - 全面重构了验证逻辑和状态管理，代码结构更清晰，可维护性与稳定性更高。
</details>
插件作者: huotuo146
 * 🌐 GitHub
 * 📧 Email: 2996603469@qq.com
 * 🔗 项目地址: astrbot_plugin_Group-Verification_PRO
📜 许可证
本项目采用 MIT 许可证 进行开源。
<div align="center">
<p>如果您觉得这个插件有用，请考虑给项目一个 ⭐Star！</p>
<p>有问题或建议？欢迎 <a href="https://github.com/huntuo146/astrbot_plugin_Group-Verification_PRO/issues/new">提交 Issue</a></p>
<sub>Made with ❤️ by huotuo146</sub>
</div>
